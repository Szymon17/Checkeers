(()=>{"use strict";var e={d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{t:()=>H});const t={areas:[],actualArea:null,pawnMoved:!1,playerHited:!1,anotherHit:null,playerPawns:[],AiPawns:[],pawnIsGrabed:!1,playerTurn:!0,grabedPawn:null,endGame:!1,resetState:()=>{t.areas=[],t.actualArea=null,t.pawnMoved=!1,t.pawnIsGrabed=!1,t.playerPawns=[],t.AiPawns=[],t.playerTurn=!0,t.grabedPawn=null,t.endGame=!1}},a=t,n=e=>{const t=r(e),a=d(t,e);return o(a)},r=e=>{const t=e.parentElement,n=!0===a.playerTurn?1:-1,r=Number(t.dataset.x),l=Number(t.dataset.y),s=((e,t,a,n)=>{const r=[];if("queen"===e.dataset.type){let e=0;if(1===n)for(;t+e<8||t-e>1||a+e<8||a-e>1;)e++,l(e);else for(;t+-e>1||t- -e<8||a+-e>1||a- -e<8;)e++,l(e)}else r.push({x:t-1,y:a-1},{x:t-1,y:a+1},{x:t+1,y:a-1},{x:t+1,y:a+1},{x:t-2,y:a-2},{x:t-2,y:a+2},{x:t+2,y:a-2},{x:t+2,y:a+2});function l(e){let l={x:t+e*n,y:a+e*n};l.x<=8&&l.y<=8&&l.x>=1&&l.y>=1&&r.push(l),l={x:t-e*n,y:a-e*n},l.x<=8&&l.y<=8&&l.x>=1&&l.y>=1&&r.push(l),l={x:t+e*n,y:a-e*n},l.x<=8&&l.y<=8&&l.x>=1&&l.y>=1&&r.push(l),l={x:t-e*n,y:a+e*n},l.x<=8&&l.y<=8&&l.x>=1&&l.y>=1&&r.push(l)}return r})(e,r,l,n),d=[];return s.forEach((e=>{const t=a.areas.filter((t=>t.dataset.x==e.x&&t.dataset.y==e.y));void 0!==t[0]&&d.push(t[0])})),1===n?{nextAreas:[d.filter((e=>e.dataset.y>l&&e.dataset.x>r)),d.filter((e=>e.dataset.y>l&&e.dataset.x<r))],backAreas:[d.filter((e=>e.dataset.y<l&&e.dataset.x>r)),d.filter((e=>e.dataset.y<l&&e.dataset.x<r))]}:{nextAreas:[d.filter((e=>e.dataset.y<l&&e.dataset.x>r)),d.filter((e=>e.dataset.y<l&&e.dataset.x<r))],backAreas:[d.filter((e=>e.dataset.y>l&&e.dataset.x>r)),d.filter((e=>e.dataset.y>l&&e.dataset.x<r))]}},l=()=>{const{enemyPawn:e,pawns:t}=(()=>{let e=null,t=null;switch(a.playerTurn){case!0:e="AI-pawn";break;case!1:e="player-pawn"}return t=!0===a.playerTurn?a.playerPawns.filter((e=>null!==e)):a.AiPawns.filter((e=>null!==e)),{enemyPawn:e,pawns:t}})(),n=[];return t.forEach((t=>{const a=s(t,e);a.length>0&&n.push(a)})),n},s=(e,t)=>{const{nextAreas:a,backAreas:n}=r(e),l=[];return[...a,...n].forEach((a=>{const n=[];let r=!1,s=null,d=0;a.forEach((e=>{const a=e.lastChild;null!==a&&a.dataset.name===t&&0===d?(r=!0,d++,s=a):r&&null===a&&1===d?n.push(e):null!==a&&d++})),n.length>0&&null!==s&&l.push([e,s,n])})),l},d=(e,t)=>{const a=t.parentElement;if("pawn"===t.dataset.type)return[...e.nextAreas[0],...e.nextAreas[1]].filter((e=>e.dataset.x==Number(a.dataset.x)+1||e.dataset.x==Number(a.dataset.x)-1));{const t=[...e.backAreas,...e.nextAreas];let a=[],n=0;return t.forEach((e=>{n=0,e.forEach((e=>{0===e.childNodes.length&&0===n?a.push(e):n++}))})),a}},o=e=>e.filter((e=>0===e.childNodes.length)),c=(e,t=e[0][0][0],a=e[0][0][2][0])=>{let n=null;return e.forEach((e=>{e.forEach((e=>{e[0]===t&&e[2].forEach((t=>{t===a&&(n=((e,t)=>(e[0].remove(),e[1].remove(),t.append(e[0]),{forced:e[0],hited:e[1]}))(e,t))}))}))})),n},u=e=>{const t="player-pawn"===e.dataset.name?8:1;e.parentElement.dataset.y==t&&(e.dataset.type="queen",e.classList.add("queen"))},i=()=>{const e=a.AiPawns.filter((e=>null!==e)),t=a.playerPawns.filter((e=>null!==e)),r=!0===a.playerTurn?a.playerPawns:a.AiPawns,s=[];r.forEach((e=>{null!==e&&n(e).length>0&&s.push(e)}));const d=l();(0===e.length||0===t.length||0===s.length&&0===d.length)&&((e=>{const t=document.createElement("div");t.classList.add("end-screen");const a=document.createElement("button");a.classList.add("end-screen-btn"),a.innerText="Start",a.addEventListener("click",H),t.append(a),document.body.prepend(t)})(),a.endGame=!0)},p=()=>{i(),a.playerTurn=!0,i()},y=e=>{const t=a.playerPawns.findIndex((t=>t===e));a.playerPawns[t]=null},f=()=>{let e=null,t=null;const r=(()=>{const e=[];return a.AiPawns.forEach((t=>{null!==t&&n(t).length>0&&e.push(t)})),e})();r.length>0&&(e=(e=>e[Math.floor(Math.random()*e.length)])(r),t=(e=>{const t=n(e);return t[Math.floor(Math.random()*t.length)]})(e));const d=l();if(d.length>0){if(null!==a.anotherHit)return void(()=>{let e=[s(a.anotherHit,"player-pawn")];if(e[0].length>0){const t=c(e);if(y(t.hited),e=[s(t.forced,"player-pawn")],e[0].length>0)return a.anotherHit=t.forced,void f();u(a.anotherHit),a.anotherHit=null,p()}})();{const e=c(d);if(y(e.hited),s(e.forced,"player-pawn").length>0)return a.anotherHit=e.forced,void f();u(e.forced)}}else null!==e&&(e.remove(),t.append(e),u(e));p()},h=f;let w=null;const x=()=>{null!==a.grabedPawn&&(a.grabedPawn.style="",a.grabedPawn=null,a.pawnIsGrabed=!1)},m=e=>{a.endGame||(a.playerTurn=!1,x(),u(e),h())},g=e=>{const t=a.AiPawns.findIndex((t=>t===e));a.AiPawns[t]=null},b=e=>{const t=null===a.grabedPawn?a.anotherHit:a.grabedPawn,r=(e=>{const t=void 0===e?w.x:e.clientX,n=void 0===e?w.y:e.clientY;return a.areas.filter((e=>t>e.offsetLeft&&t<e.offsetLeft+e.offsetWidth&&n>e.offsetTop&&n<e.offsetTop+e.offsetHeight))[0]})(e),d=l();if(void 0!==r){if(null!==a.anotherHit){const e=[s(a.anotherHit,"AI-pawn")];if(e[0].length>0)return((e,t)=>{const n=c(t,a.grabedPawn,e);if(null!==n&&(g(n.hited),0===s(a.anotherHit,"AI-pawn").length)){const e=a.anotherHit;a.anotherHit=null,m(e)}})(r,e),void x();a.anotherHit=null,m(t)}else{if(d.length>0&&null===a.anotherHit){const t=c(d,a.grabedPawn,r);return null!==t&&null!==t.forced&&(a.anotherHit=t.forced,g(t.hited),w={x:e.clientX,y:e.clientY},b()),void x()}{const e=((e,t)=>{const a=n(e);let r=!1;return a.forEach((a=>{t===a&&(e.remove(),t.append(e),r=!0)})),r})(t,r);e&&m(t)}}x()}else x()};let P={x:null,y:null};const A=e=>{if(E(e),a.pawnIsGrabed){const t=a.grabedPawn,n=-1*(P.x-e.clientX),r=-1*(P.y-e.clientY);t.style.transform=`translate(${n}px,${r}px)`}},E=e=>{const t="area"===e.target.dataset.name?e.target:e.target.parentElement;void 0!==t.dataset.x&&(a.actualArea=`${t.dataset.x}, ${t.dataset.y}`,document.querySelector(".actual-area").textContent=a.actualArea)},v=e=>{!1!==a.pawnIsGrabed&&b(e)},H=()=>{document.body.innerHTML="",a.resetState();const e=(()=>{const e=document.createElement("section");e.classList.add("board");const t=document.createElement("p");t.classList.add("actual-area");const n=document.createElement("div");n.classList.add("areas-container");let r=1;for(let e=8;e>0;e--){r++;for(let t=1;t<9;t++){const a=document.createElement("div");a.dataset.x=t,a.dataset.y=e,a.dataset.name="area",(t+r)%2==0?a.classList.add("area"):a.classList.add("area--disabled"),n.append(a)}}return e.append(t,n),(e=>{const t=[...e.querySelectorAll(".area")];for(let e=0;e<12;e++){const r=n("AI-pawn");a.AiPawns.push(r),t[e].append(r)}for(let e=t.length-1;e>t.length-13;e--){const r=n("player-pawn");a.playerPawns.push(r),t[e].append(r)}function n(e){const t=document.createElement("div");return t.classList.add("pawn",e),t.dataset.name=e,t.dataset.type="pawn",t}})(e),e})();a.areas=[...e.querySelectorAll(".area")],document.body.append(e),e.addEventListener("mousemove",A),a.playerPawns.forEach(((e,t)=>e.addEventListener("mousedown",(e=>((e,t)=>{if(!a.playerTurn)return;const n=a.playerPawns[e];a.grabedPawn=n,P.x=t.clientX,P.y=t.clientY,a.pawnIsGrabed=!0})(t,e))))),document.addEventListener("mouseup",v)};H()})();